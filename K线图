import os
import pandas as pd
import ffn
import csv
import codecs
from io import StringIO
import numpy as np
import matplotlib; matplotlib.use('TKAgg')
import matplotlib.pyplot as plt
from matplotlib.dates import DateFormatter,WeekdayLocator,DayLocator,MONDAY,date2num
from statsmodels.tsa import stattools
from statsmodels.graphics.tsaplots import *
from datetime import datetime
from mpl_finance import candlestick_ohlc


os.chdir('D:/Document')
data = pd.read_csv('problem27-1.csv')
#print(data.head())
data.date = [date2num(datetime.strptime(date,"%Y-%m-%d"))for date in data.date]
print(type(data.date))
data_list = list()
for i in range(len(data)):
    data_list.append(data.iloc[i,:])
ax = plt.subplot(

)
mondays = WeekdayLocator(MONDAY)
weekFormatter = DateFormatter('%y %b %d')
ax.xaxis.set_major_locator(mondays)
ax.xaxis.set_minor_locator(DayLocator() )
ax.xaxis.set_major_formatter(weekFormatter)
plt.rcParams['font.sans-serif'] = ['SimHei']
plt.rcParams['axes.unicode_minus'] = False
ax.set_title('test111')
candlestick_ohlc(ax,data,width=0.7,colorup='r',colordown='g')
plt.setp(plt.gca().get_xticklabels(),rotation = 50, horizontalalignment = 'center')
plt.show()
